#!/usr/bin/env python
from os.path import basename
from pathlib import Path
import sys


from lib.utils import validate_emails

if __name__ == "__main__":
    if not len(sys.argv) == 2:
        print(f"Usage: {basename(__file__)} <email_list>", file=sys.stderr)
        sys.exit(1)

    data = Path(sys.argv[1])
    if not data.is_file() or not data.exists():
        print(
            f"File '{data}' does not exist or is not a regular file.", file=sys.stderr
        )
        sys.exit(1)

    validate_emails(data.read_text().splitlines(), out=sys.stdout)
